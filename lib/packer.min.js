"use strict";Object.defineProperty(exports,"__esModule",{value:!0});function contains(a,b){var c=b.width||0,d=b.height||0;return a.x<=b.x&&a.y<=b.y&&a.x+a.width>=b.x+c&&a.y+a.height>=b.y+d}function merge(a){for(var e=0;e<a.length;e++)for(var b=a[e],c=0,d=a[e+c];d;){if(d===b)c++;else if(contains(d,b)){a.splice(e,1),b=a[e],d=null;continue}else contains(b,d)?a.splice(e+c,1):c++;d=a[e+c]}}function overlaps(c,a,b){var d=c.x+c.width+b.x,e=c.y+c.height+b.y,f=a.x+a.width+b.x,g=a.y+a.height+b.y;return c.x<f&&d>a.x&&c.y<g&&e>a.y}function subtract(c,a,b){var d=[],e=c.x+c.width,f=c.y+c.height,g=a.x+a.width,h=a.y+a.height;// left
return c.y<a.y&&d.push({x:c.x,y:c.y,width:c.width,height:a.y-c.y-b.y}),e>g&&d.push({x:g+b.x,y:c.y,width:e-g,height:c.height}),f>h&&d.push({x:c.x,y:h+b.y,width:c.width,height:f-h}),c.x<a.x&&d.push({x:c.x,y:c.y,width:a.x-c.x-b.x,height:c.height}),d}function fits(c,a){return c.width>=a.width&&c.height>=a.height}function getStrategy(a){return a?{sorter:function(c,a){return c.y-a.y||c.x-a.x},place:function(a,b){a.x=b.x+b.width-a.width,a.y=b.y}}:{sorter:function(c,a){return c.y-a.y||c.x-a.x},place:function(a,b){a.x=b.x,a.y=b.y}}}function packer(a,b,c){var d={gap:{x:0,y:0},rtl:!1};Object.assign(d,c);var e=[{x:0,y:0,width:a.width||1/0,height:a.height||1/0}],f=getStrategy(d.rtl);return b.map(function(a){var b={width:a.width||0,height:a.height||0},c=e.find(function(a){return fits(a,b)});if(c){f.place(b,c);var g=e.filter(function(a){return overlaps(b,a,d.gap)});g.forEach(function(a){e.splice(e.indexOf(a),1),e.push.apply(e,subtract(a,b,d.gap))}),merge(e),e.sort(f.sorter)}return b})}exports.default=packer;
