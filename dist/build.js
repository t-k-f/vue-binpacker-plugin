'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _packer=require('./lib/packer.js'),_packer2=_interopRequireDefault(_packer),_vue=require('vue');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _asyncToGenerator(a){return function(){var b=a.apply(this,arguments);return new Promise(function(a,c){function d(e,f){try{var g=b[e](f),h=g.value}catch(a){return void c(a)}return g.done?void a(h):Promise.resolve(h).then(function(a){d('next',a)},function(a){d('throw',a)})}return d('next')})}}exports.default={install:function b(a){a.component('VueBinpacker',{props:{gap:{type:Object,default:function a(){return{x:0,y:0}}},rtl:{type:Boolean,required:!1,default:!1},initLayout:{type:Boolean,required:!1,default:!0},toggleLayout:{type:Boolean,required:!1,default:!1}},setup:function k(a,b){var c=this,d=b.slots,e=(0,_vue.ref)(null),f=(0,_vue.ref)(!1),g=null,h=null,a=function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(){var d,g,h,j,k,l,m,n,o,p,q,r;return regeneratorRuntime.wrap(function b(c){for(;1;)switch(c.prev=c.next){case 0:if(!f.value&&a.initLayout){c.next=2;break}return c.abrupt('return');case 2:for(f.value=!0,console.log('runs'),d={},g=e.value.querySelectorAll('[data-packer-gap="true"]'),h=e.value.getBoundingClientRect().width,j=e.value.querySelectorAll('[data-packer-item="true"]'),k=[],g.length?(d.x=g[0].getBoundingClientRect().width,d.y=g[0].getBoundingClientRect().height):(d.x=a.gap.x,d.y=a.gap.y),l=0;l<j.length;l++)m=j[l].getBoundingClientRect(),k.push({width:m.width,height:m.height});for(n={width:h,height:1/0},o=(0,_packer2.default)(n,k,{rtl:a.rtl,gap:d}),p=0,q=0;q<j.length;q++)j[q].style.position='absolute',j[q].style.left=0,j[q].style.top=0,j[q].style.transform='translate('+o[q].x+'px, '+o[q].y+'px)',r=o[q].y+o[q].height,p=r>p?r:p;return e.value.style.height=p+'px',c.next=18,new Promise(requestAnimationFrame);case 18:return c.next=20,new Promise(requestAnimationFrame);case 20:f.value=!1;case 21:case'end':return c.stop();}},b,c)}));return function a(){return b.apply(this,arguments)}}(),a=function a(){g=new ResizeObserver(i),h=new MutationObserver(i),g.observe(e.value),h.observe(e.value,{childList:!0,attributes:!0,subtree:!0})};return(0,_vue.onMounted)(function(){e.value.style.position='relative',j(),i()}),(0,_vue.onBeforeUnmount)(function(){g.disconnect(),h.disconnect()}),function(){return(0,_vue.h)('div',{ref:e},d.default())}}})}};
