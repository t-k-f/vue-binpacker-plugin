'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _vue=require('vue'),_vue2=_interopRequireDefault(_vue),_packer=require('../lib/packer.js'),_packer2=_interopRequireDefault(_packer);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default={install:function b(a){a.component('vueBinpacker',{render:function b(a){return a('div',this.$slots.default)},data:function a(){return{observer:null,observerPause:!1}},created:function a(){window.addEventListener('resize',this.setPacker)},beforeDestroy:function a(){window.removeEventListener('resize',this.setPacker)},mounted:function a(){this.setObserver(),this.setPacker(),this.$el.style.position='relative'},methods:{setObserver:function a(){this.observer=new MutationObserver(this.setObserverMutations),this.observer.observe(this.$el,{childList:!0,attributes:!0,subtree:!0})},setObserverMutations:function a(){this.observerPause||this.setPacker()},setPacker:function n(){var a=Math.floor,b=this;this.observerPause=!0;for(var c,d=this.$el.getBoundingClientRect().width,e=this.$el.querySelectorAll('[data-packer-item="true"]'),f=[],g=0;g<e.length;g++)c=e[g].getBoundingClientRect(),f.push({width:a(c.width),height:a(c.height)});for(var h={width:d,height:1/0},j=(0,_packer2.default)(h,f),k=0,l=0;l<e.length;l++){e[l].style.position='absolute',e[l].style.left=0,e[l].style.top=0,e[l].style.transform='translate('+j[l].x+'px, '+j[l].y+'px)';var m=j[l].y+j[l].height;k=m>k?m:k}this.$el.style.height=k+'px',window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){b.observerPause=!1})})}}})}};
