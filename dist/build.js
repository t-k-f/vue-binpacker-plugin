'use strict';Object.defineProperty(exports,'__esModule',{value:!0});var _packerMin=require('../lib/packer.min.js'),_packerMin2=_interopRequireDefault(_packerMin),_vue=require('vue');function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}exports.default={install:function b(a){a.component('vueBinpacker',{render:function a(){return(0,_vue.h)('div',{},this.$slots.default())},emits:['layout-done'],props:{gap:{type:Number,required:!1,default:0},rtl:{type:Boolean,required:!1,default:!1},initLayout:{type:Boolean,required:!1,default:!0},toggleLayout:{type:Boolean,required:!1,default:!1}},data:function a(){return{observer:null,observerPause:!1}},beforeUnmount:function a(){window.removeEventListener('resize',this.setPacker)},mounted:function a(){window.addEventListener('resize',this.setPacker),this.$el.style.position='relative',this.setObserver();this.initLayout&&this.setPacker()},methods:{setObserver:function a(){this.observer=new MutationObserver(this.setObserverMutations),this.observer.observe(this.$el,{childList:!0,attributes:!0,subtree:!0})},setObserverMutations:function a(){this.observerPause||!this.initLayout||this.setPacker()},setPacker:function n(){var a=Math.floor,b=this;this.observerPause=!0;var c=this.$el.querySelectorAll('[data-packer-gap="true"]'),d=this.$el.getBoundingClientRect().width,e=this.$el.querySelectorAll('[data-packer-item="true"]'),f=[],g=0;c.length?g=c[0].getBoundingClientRect().width:this.gap&&(g=this.gap);for(var o,p=0;p<e.length;p++)o=e[p].getBoundingClientRect(),f.push({width:a(o.width),height:a(o.height)});for(var h={width:d,height:1/0},j=(0,_packerMin2.default)(h,f,{rtl:this.rtl,gap:g}),k=0,l=0;l<e.length;l++){e[l].style.position='absolute',e[l].style.left=0,e[l].style.top=0,e[l].style.transform='translate('+j[l].x+'px, '+j[l].y+'px)';var m=j[l].y+j[l].height;k=m>k?m:k}this.$el.style.height=k+'px',window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){b.observerPause=!1,b.$emit('layout-done',j)})})}},watch:{toggleLayout:function a(){this.setPacker()}}})}};
